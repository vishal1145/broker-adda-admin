module.exports=[40617,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].React},92287,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.AppRouterContext},3274,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.HooksClientContext},77635,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},13792,(a,b,c)=>{"use strict";b.exports=a.r(18622)},83178,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].ReactJsxRuntime},85790,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(83178),c=a.i(17461);function d({children:a}){let d=(0,c.usePathname)();return(0,b.jsx)("div",{className:"h-screen flex overflow-hidden bg-white",children:(0,b.jsxs)("div",{className:"flex flex-col w-full overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center px-8 space-x-8",children:[(0,b.jsx)("a",{href:"/brokers",className:`text-sm font-medium transition-colors border-b-2 ${"/brokers"===d?"text-primary border-primary":"text-gray-700 hover:text-primary border-transparent hover:border-primary"}`,children:"Brokers"}),(0,b.jsx)("a",{href:"/regions",className:`text-sm font-medium transition-colors border-b-2 ${"/regions"===d?"text-primary border-primary":"text-gray-700 hover:text-primary border-transparent hover:border-primary"}`,children:"Regions"})]}),(0,b.jsx)("div",{className:"flex-1 px-10 flex justify-end items-center",children:(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Rohit Tyagi"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Admin"})]}),(0,b.jsx)("button",{className:"ml-2 text-gray-400 hover:text-gray-500",children:(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})})})]}),(0,b.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:(0,b.jsx)("div",{className:"py-6",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto   ",children:a})})})]})})}},6502,a=>{"use strict";a.s(["brokerAPI",()=>c,"regionAPI",()=>d]);let b="https://broker-adda-be.algofolks.com/api",c={getBrokers:async(a,c,d)=>{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let f=new URLSearchParams({page:a.toString(),limit:c.toString(),...void 0!==d&&{approvedByAdmin:d.toString()}}),g=await fetch(`${b}/brokers?${f}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!g.ok)throw Error("Failed to fetch brokers");return g.json()},approveBroker:async a=>{console.log("🟢 brokerAPI.approveBroker called with ID:",a);let c=localStorage.getItem("adminToken");if(console.log("🟢 Token found:",c?"Yes":"No"),!c)throw Error("No authentication token found");let d=`${b}/brokers/${a}/approve`;console.log("🟢 Making API call to:",d),console.log("🟢 API_BASE_URL:",b);let e=await fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({})});if(console.log("🟢 Response status:",e.status),console.log("🟢 Response ok:",e.ok),!e.ok)throw console.error("🔴 API Error:",await e.text()),Error("Failed to approve broker");let f=await e.json();return console.log("🟢 API Response:",f),console.log("🟢 API Response data:",f.data),console.log("🟢 Updated broker:",f.data),f},rejectBroker:async a=>{console.log("🔴 brokerAPI.rejectBroker called with ID:",a);let c=localStorage.getItem("adminToken");if(console.log("🔴 Token found:",c?"Yes":"No"),!c)throw Error("No authentication token found");let d=`${b}/brokers/${a}/reject`;console.log("🔴 Making API call to:",d),console.log("🔴 API_BASE_URL:",b);let e=await fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({})});if(console.log("🔴 Response status:",e.status),console.log("🔴 Response ok:",e.ok),!e.ok)throw console.error("🔴 API Error:",await e.text()),Error("Failed to reject broker");let f=await e.json();return console.log("🔴 API Response:",f),console.log("🔴 API Response data:",f.data),console.log("🔴 Updated broker:",f.data),f}},d={getRegions:async()=>{console.log("🟢 regionAPI.getRegions called");let a=localStorage.getItem("adminToken");if(console.log("🟢 Token found:",a?"Yes":"No"),!a)throw Error("No authentication token found");let c=`${b}/regions`;console.log("🟢 Making API call to:",c);let d=await fetch(c,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(console.log("🟢 Response status:",d.status),console.log("🟢 Response ok:",d.ok),!d.ok)throw console.error("🔴 API Error:",await d.text()),Error("Failed to fetch regions");let e=await d.json();return console.log("🟢 API Response:",e),e},createRegion:async(a,c)=>{console.log("🔵 regionAPI.createRegion called with:",{name:a,description:c});let d=localStorage.getItem("adminToken");if(console.log("🔵 Token found:",d?"Yes":"No"),!d)throw Error("No authentication token found");let e=`${b}/regions`,f={name:a,description:c};console.log("🔵 Making API call to:",e),console.log("🔵 Request body:",f),console.log("🔵 Headers:",{"Content-Type":"application/json",Authorization:`Bearer ${d}`});let g=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(f)});if(console.log("🔵 Response status:",g.status),console.log("🔵 Response ok:",g.ok),!g.ok)throw console.error("🔴 API Error:",await g.text()),Error("Failed to create region");let h=await g.json();return console.log("🔵 API Response:",h),h},getBrokersByRegion:async(a,c=1,d=10)=>{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let f=new URLSearchParams({page:c.toString(),limit:d.toString(),regionId:a}),g=await fetch(`${b}/brokers/region/${a}?${f}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!g.ok)throw Error("Failed to fetch brokers by region");return g.json()}}},87084,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(83178),c=a.i(40617),d=a.i(85790),e=a.i(6502);function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({name:"",description:""}),u=async()=>{try{l(!0),p("");let a=await e.regionAPI.getRegions();console.log("Regions API Response:",a),a&&a.data&&a.data.regions&&Array.isArray(a.data.regions)?f(a.data.regions):Array.isArray(a)?f(a):a.data&&Array.isArray(a.data)?f(a.data):a.regions&&Array.isArray(a.regions)?f(a.regions):(console.warn("Unexpected API response structure:",a),f([]))}catch(a){console.error("Error fetching regions:",a),p(a instanceof Error?a.message:"Failed to fetch regions"),f([])}finally{l(!1)}},v=async a=>{try{n(!0),p("");let b=await e.regionAPI.getBrokersByRegion(a);console.log("Brokers by region API Response:",b),b&&b.data&&b.data.brokers&&Array.isArray(b.data.brokers)?h(b.data.brokers):Array.isArray(b)?h(b):b.data&&Array.isArray(b.data)?h(b.data):b.brokers&&Array.isArray(b.brokers)?h(b.brokers):(console.warn("Unexpected brokers API response structure:",b),h([]))}catch(a){console.error("Error fetching brokers by region:",a),p(a instanceof Error?a.message:"Failed to fetch brokers"),h([])}finally{n(!1)}},w=async a=>{a.preventDefault(),console.log("Form submitted with data:",s);try{p(""),console.log("Calling regionAPI.createRegion...");let a=await e.regionAPI.createRegion(s.name,s.description);console.log("Create region API Response:",a),t({name:"",description:""}),r(!1),console.log("Refreshing regions list..."),u()}catch(a){console.error("Error creating region:",a),p(a instanceof Error?a.message:"Failed to create region")}},x=async a=>{try{p(""),await e.brokerAPI.approveBroker(a),i&&v(i._id)}catch(a){p(a instanceof Error?a.message:"Failed to approve broker")}},y=async a=>{try{p("");let b=await e.brokerAPI.rejectBroker(a);console.log("🔴 Reject API response:",b),h(b=>b.map(b=>b._id===a?{...b,status:"inactive",approvedByAdmin:!1}:b)),i&&v(i._id)}catch(a){p(a instanceof Error?a.message:"Failed to reject broker")}};return(0,c.useEffect)(()=>{console.log("🚀 RegionsPage component mounted"),console.log("🚀 Checking for admin token...");let a=localStorage.getItem("adminToken");console.log("🚀 Token exists:",a?"Yes":"No"),a&&console.log("🚀 Token preview:",a.substring(0,20)+"..."),u()},[]),(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:" space-y-6 ",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Region Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage regions and view brokers by region"})]}),(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsx)("button",{onClick:()=>r(!q),className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:q?"Cancel":"Add New Region"})}),q&&(0,b.jsxs)("div",{className:" p-6 rounded-lg shadow-sm border border-gray-300",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Region"}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Region Name"}),(0,b.jsx)("input",{type:"text",value:s.name,onChange:a=>t({...s,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Enter region name",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:s.description,onChange:a=>t({...s,description:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Enter region description",rows:3,required:!0})]}),(0,b.jsxs)("div",{className:"flex space-x-3",children:[(0,b.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Create Region"}),(0,b.jsx)("button",{type:"button",onClick:()=>r(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),o&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),(0,b.jsx)("div",{className:" shadow-sm rounded-lg border border-gray-300 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"REGION NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DESCRIPTION"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CREATED DATE"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UPDATED DATE"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-300",children:k?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading regions..."})]})})}):Array.isArray(a)&&0!==a.length?a.map((a,c)=>(0,b.jsxs)("tr",{className:`${c%2==0?"bg-white":"bg-gray-50"} hover:bg-gray-100 cursor-pointer border-b border-gray-300 ${i?._id===a._id?"bg-primary/5":""}`,onClick:()=>{j(a),v(a._id)},children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:a.description})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:new Date(a.updatedAt).toLocaleDateString()})})]},a._id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No regions found. Create your first region above."})})})]})})}),i&&(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Brokers in ",i.name]}),(0,b.jsx)("p",{className:"text-gray-600",children:i.description})]}),(0,b.jsx)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"COMPANY NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CONTACT"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUS"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading brokers..."})]})})}):Array.isArray(g)&&0!==g.length?g.map((a,c)=>(0,b.jsxs)("tr",{className:`${c%2==0?"bg-white":"bg-gray-50"} hover:bg-gray-100 border-b border-gray-200`,children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-orange-500 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-medium text-white",children:(a.name||a.firmName||"B").split(" ").map(a=>a[0]).join("").toUpperCase()})})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[a.name||"N/A"," (",c+1,")"]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.email||"N/A"})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.firmName||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.phone||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("span",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full border ${a.approvedByAdmin?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}`,children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full mr-2 ${a.approvedByAdmin?"bg-green-600":"bg-yellow-600"}`}),a.approvedByAdmin?"Approved":"Pending"]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsx)("div",{className:"flex space-x-2",children:a.approvedByAdmin?(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 bg-green-600"}),"Approved"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>x(a._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Approve"}),(0,b.jsx)("button",{onClick:()=>y(a._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:"Reject"})]})})})]},a._id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No brokers found in this region"})})})]})})})]})]})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a244d21f._.js.map