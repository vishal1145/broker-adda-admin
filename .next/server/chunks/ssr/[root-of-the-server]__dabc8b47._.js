module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(87924),e=a.r(51234),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},80353,a=>{"use strict";a.s(["default",()=>i]);var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(29908),f=a.i(84391),g=a.i(73125),h=a.i(12398);function i(){let[a,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)(1),[v,w]=(0,c.useState)(0),x=(0,c.useCallback)(async()=>{try{k(!0),m(""),console.log("ðŸ”„ Fetching brokers with statusFilter:",p);let a="approved"===p||"pending"!==p&&void 0,b=await f.brokerAPI.getBrokers(r,10,a);console.log("ðŸ“Š API Response:",b),console.log("ðŸ“Š Brokers data:",b.data.brokers),b.data.brokers&&b.data.brokers.forEach((a,b)=>{console.log(`ðŸ“Š Broker ${b+1}:`,{_id:a._id,name:a.name,approvedByAdmin:a.approvedByAdmin,type:typeof a.approvedByAdmin})}),i(b.data.brokers||[]),u(b.data.pagination.totalPages||1),w(b.data.pagination.totalBrokers||0)}catch(a){m(a instanceof Error?a.message:"Failed to fetch brokers")}finally{k(!1)}},[r,p]),y=async a=>{try{m(""),console.log("ðŸŸ¢ Approving broker with ID:",a);let b=await f.brokerAPI.approveBroker(a);console.log("ðŸŸ¢ Approve API response:",b),i(b=>b.map(b=>b._id===a?{...b,approvedByAdmin:"approved"}:b)),await x()}catch(a){console.error("ðŸŸ¢ Approve error:",a),m(a instanceof Error?a.message:"Failed to approve broker")}},z=async a=>{try{m(""),console.log("ðŸ”´ Rejecting broker with ID:",a);let b=await f.brokerAPI.rejectBroker(a);console.log("ðŸ”´ Reject API response:",b),i(b=>b.map(b=>b._id===a?{...b,approvedByAdmin:"rejected"}:b)),await x()}catch(a){console.error("ðŸ”´ Reject error:",a),m(a instanceof Error?a.message:"Failed to reject broker")}},A=a.filter(a=>(a.name||"").toLowerCase().includes(n.toLowerCase())||(a.email||"").toLowerCase().includes(n.toLowerCase())||(a.phone||"").includes(n)||a.firmName.toLowerCase().includes(n.toLowerCase()));(0,c.useEffect)(()=>{x()},[x]),(0,c.useEffect)(()=>{s(1)},[p]);let B=()=>(0,b.jsxs)("tr",{className:"bg-white border-b border-gray-200",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full animate-pulse"})}),(0,b.jsxs)("div",{className:"ml-4 space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-28"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-36"})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-40"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"h-6 bg-gray-200 rounded-full animate-pulse w-20"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})]})})]});return(0,b.jsx)(e.default,{children:(0,b.jsxs)("div",{className:" space-y-6",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Brokers"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage all registered brokers"})]})})}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,b.jsx)("div",{className:"flex-1 max-w-md",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,b.jsx)("input",{type:"text",placeholder:"Search by Firm Name, Contact, Region",value:n,onChange:a=>o(a.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]})}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,b.jsx)("div",{className:"w-48",children:(0,b.jsx)(g.default,{options:[{value:"all",label:"All Brokers"},{value:"pending",label:"Pending Approval"},{value:"approved",label:"Approved"}],value:{value:p,label:"all"===p?"All Brokers":"pending"===p?"Pending Approval":"Approved"},onChange:a=>q(a?.value||"all"),placeholder:"Select Status",isSearchable:!1,isClearable:!1,styles:{control:(a,b)=>({...a,minHeight:"40px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:b.isFocused?"0 0 0 2px rgba(59, 130, 246, 0.5)":"none","&:hover":{border:"1px solid #9ca3af"}}),option:(a,b)=>({...a,backgroundColor:b.isSelected?"#3b82f6":b.isFocused?"#f3f4f6":"white",color:b.isSelected?"white":"#374151",fontSize:"14px",padding:"8px 12px"}),singleValue:a=>({...a,color:"#374151",fontSize:"14px"}),placeholder:a=>({...a,color:"#9ca3af",fontSize:"14px"})}})})]})]}),l&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),(0,b.jsx)("div",{className:"shadow-sm rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CONTACT"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"REGION"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-300",children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B,{}),(0,b.jsx)(B,{}),(0,b.jsx)(B,{}),(0,b.jsx)(B,{}),(0,b.jsx)(B,{})]}):0===A.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No brokers found"})}):A.map(a=>(0,b.jsxs)("tr",{className:"bg-white hover:bg-gray-50 border-b border-gray-200 transition-colors duration-200",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(d.default,{href:`/brokers/${a._id}`,className:"cursor-pointer",children:(0,b.jsx)("img",{className:"h-10 w-10 rounded-full object-cover hover:opacity-80 transition-opacity duration-200",src:(a=>{if(console.log("ðŸ–¼ï¸ getBrokerImageUrl called with:",a),!a)return console.log("ðŸ–¼ï¸ No broker image, using fallback"),"https://www.w3schools.com/howto/img_avatar.png";if(a.includes("broker-adda-be.algofolks.com")||a.includes("https://")||a.includes("http://")&&!a.includes("localhost")){let b=`/api/image-proxy?url=${encodeURIComponent(a)}`;return console.log("ðŸ–¼ï¸ Using proxy URL:",b),b}return console.log("ðŸ–¼ï¸ Using direct URL:",a),a})(a.brokerImage),alt:a.name||"Broker",onError:b=>{console.log("ðŸ–¼ï¸ Image failed to load:",a.brokerImage),b.currentTarget.src="https://www.w3schools.com/howto/img_avatar.png"}})})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)(d.default,{href:`/brokers/${a._id}`,className:"text-sm font-medium text-gray-900 hover:text-primary transition-colors duration-200 cursor-pointer",children:a.name||"N/A"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.firmName||"N/A"})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center text-gray-900",children:[a.email||"N/A",a.email&&(0,b.jsx)("svg",{className:"w-4 h-4 text-green-500 ml-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),(0,b.jsxs)("div",{className:"flex items-center text-gray-500 text-xs mt-1",children:[a.phone||"N/A",a.phone&&(0,b.jsx)("svg",{className:"w-3 h-3 text-green-500 ml-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{children:a.region&&a.region.length>0?a.region[0].name:"N/A"}),(0,b.jsx)("div",{className:"text-gray-500 text-xs mt-1",children:a.region&&a.region.length>0?`${a.region[0].city}, ${a.region[0].state}`:"No Region Assigned"})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsx)("div",{className:"flex space-x-2",children:(console.log("ðŸ” Broker ID:",a._id,"approvedByAdmin:",a.approvedByAdmin,"Type:",typeof a.approvedByAdmin),"approved"===a.approvedByAdmin)?(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 bg-green-600"}),"Approved"]}):"rejected"===a.approvedByAdmin?(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 bg-red-600"}),"Rejected"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>y(a._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors cursor-pointer",children:"Approve"}),(0,b.jsx)("button",{onClick:()=>z(a._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors cursor-pointer",children:"Reject"})]})})})]},a._id))})]})})}),v>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-3",children:[(0,b.jsx)("div",{className:"flex items-center text-sm text-gray-700",children:(0,b.jsxs)("span",{children:["Showing ",(r-1)*10+1," to ",Math.min(10*r,v)," of ",v," results"]})}),(0,b.jsx)(h.default,{pageCount:t,pageRangeDisplayed:3,marginPagesDisplayed:1,onPageChange:({selected:a})=>s(a+1),forcePage:r-1,previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",containerClassName:"flex items-center space-x-1",pageClassName:"px-3 py-2 text-sm font-medium rounded-md cursor-pointer text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 transition-colors",activeClassName:"bg-primary text-white border-primary",previousClassName:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors",nextClassName:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors",breakClassName:"px-3 py-2 text-sm font-medium text-gray-500",disabledClassName:"opacity-50 cursor-not-allowed"})]})]})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__dabc8b47._.js.map