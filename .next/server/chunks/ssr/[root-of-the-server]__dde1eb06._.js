module.exports=[40617,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].React},92287,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.AppRouterContext},3274,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.HooksClientContext},77635,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},13792,(a,b,c)=>{"use strict";b.exports=a.r(18622)},83178,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].ReactJsxRuntime},85790,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(83178),c=a.i(17461);function d({children:a}){let d=(0,c.usePathname)();return(0,b.jsx)("div",{className:"h-screen flex overflow-hidden bg-white",children:(0,b.jsxs)("div",{className:"flex flex-col w-full overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center px-8 space-x-8",children:[(0,b.jsx)("a",{href:"/brokers",className:`text-sm font-medium transition-colors border-b-2 ${"/brokers"===d?"text-primary border-primary":"text-gray-700 hover:text-primary border-transparent hover:border-primary"}`,children:"Brokers"}),(0,b.jsx)("a",{href:"/regions",className:`text-sm font-medium transition-colors border-b-2 ${"/regions"===d?"text-primary border-primary":"text-gray-700 hover:text-primary border-transparent hover:border-primary"}`,children:"Regions"})]}),(0,b.jsx)("div",{className:"flex-1 px-10 flex justify-end items-center",children:(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Rohit Tyagi"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Admin"})]}),(0,b.jsx)("button",{className:"ml-2 text-gray-400 hover:text-gray-500",children:(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})})})]}),(0,b.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:(0,b.jsx)("div",{className:"py-6",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto   ",children:a})})})]})})}},6502,a=>{"use strict";a.s(["brokerAPI",()=>c,"regionAPI",()=>d]);let b="https://broker-adda-be.algofolks.com/api",c={getBrokers:async(a,c,d)=>{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let f=new URLSearchParams({page:a.toString(),limit:c.toString(),...void 0!==d&&{approvedByAdmin:d.toString()}}),g=await fetch(`${b}/brokers?${f}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!g.ok)throw Error("Failed to fetch brokers");return g.json()},approveBroker:async a=>{console.log("游릭 brokerAPI.approveBroker called with ID:",a);let c=localStorage.getItem("adminToken");if(console.log("游릭 Token found:",c?"Yes":"No"),!c)throw Error("No authentication token found");let d=`${b}/brokers/${a}/approve`;console.log("游릭 Making API call to:",d),console.log("游릭 API_BASE_URL:",b);let e=await fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({})});if(console.log("游릭 Response status:",e.status),console.log("游릭 Response ok:",e.ok),!e.ok)throw console.error("游댮 API Error:",await e.text()),Error("Failed to approve broker");let f=await e.json();return console.log("游릭 API Response:",f),console.log("游릭 API Response data:",f.data),console.log("游릭 Updated broker:",f.data),f},rejectBroker:async a=>{console.log("游댮 brokerAPI.rejectBroker called with ID:",a);let c=localStorage.getItem("adminToken");if(console.log("游댮 Token found:",c?"Yes":"No"),!c)throw Error("No authentication token found");let d=`${b}/brokers/${a}/reject`;console.log("游댮 Making API call to:",d),console.log("游댮 API_BASE_URL:",b);let e=await fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({})});if(console.log("游댮 Response status:",e.status),console.log("游댮 Response ok:",e.ok),!e.ok)throw console.error("游댮 API Error:",await e.text()),Error("Failed to reject broker");let f=await e.json();return console.log("游댮 API Response:",f),console.log("游댮 API Response data:",f.data),console.log("游댮 Updated broker:",f.data),f}},d={getRegions:async()=>{console.log("游릭 regionAPI.getRegions called");let a=localStorage.getItem("adminToken");if(console.log("游릭 Token found:",a?"Yes":"No"),!a)throw Error("No authentication token found");let c=`${b}/regions`;console.log("游릭 Making API call to:",c);let d=await fetch(c,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(console.log("游릭 Response status:",d.status),console.log("游릭 Response ok:",d.ok),!d.ok)throw console.error("游댮 API Error:",await d.text()),Error("Failed to fetch regions");let e=await d.json();return console.log("游릭 API Response:",e),e},createRegion:async(a,c)=>{console.log("游댯 regionAPI.createRegion called with:",{name:a,description:c});let d=localStorage.getItem("adminToken");if(console.log("游댯 Token found:",d?"Yes":"No"),!d)throw Error("No authentication token found");let e=`${b}/regions`,f={name:a,description:c};console.log("游댯 Making API call to:",e),console.log("游댯 Request body:",f),console.log("游댯 Headers:",{"Content-Type":"application/json",Authorization:`Bearer ${d}`});let g=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(f)});if(console.log("游댯 Response status:",g.status),console.log("游댯 Response ok:",g.ok),!g.ok)throw console.error("游댮 API Error:",await g.text()),Error("Failed to create region");let h=await g.json();return console.log("游댯 API Response:",h),h},getBrokersByRegion:async(a,c=1,d=10)=>{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let f=new URLSearchParams({page:c.toString(),limit:d.toString(),regionId:a}),g=await fetch(`${b}/brokers/region/${a}?${f}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!g.ok)throw Error("Failed to fetch brokers by region");return g.json()}}},97936,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(83178),c=a.i(40617),d=a.i(85790),e=a.i(6502);function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)("all"),[o,p]=(0,c.useState)(1),[q,r]=(0,c.useState)(1),[s,t]=(0,c.useState)(0),u=async()=>{try{h(!0),j("");let a="approved"===m||"pending"!==m&&void 0,b=await e.brokerAPI.getBrokers(o,10,a);console.log("游늵 API Response:",b),console.log("游늵 Brokers data:",b.data.brokers),f(b.data.brokers||[]),r(b.data.pagination.totalPages||1),t(b.data.pagination.totalBrokers||0)}catch(a){j(a instanceof Error?a.message:"Failed to fetch brokers")}finally{h(!1)}},v=async a=>{try{j(""),console.log("游릭 Approving broker with ID:",a);let b=await e.brokerAPI.approveBroker(a);console.log("游릭 Approve API response:",b),await u()}catch(a){console.error("游릭 Approve error:",a),j(a instanceof Error?a.message:"Failed to approve broker")}},w=async a=>{try{j(""),console.log("游댮 Rejecting broker with ID:",a);let b=await e.brokerAPI.rejectBroker(a);console.log("游댮 Reject API response:",b),f(b=>b.map(b=>b._id===a?{...b,status:"inactive",approvedByAdmin:!1}:b)),await u()}catch(a){console.error("游댮 Reject error:",a),j(a instanceof Error?a.message:"Failed to reject broker")}},x=a.filter(a=>(a.name||"").toLowerCase().includes(k.toLowerCase())||(a.email||"").toLowerCase().includes(k.toLowerCase())||(a.phone||"").includes(k)||a.firmName.toLowerCase().includes(k.toLowerCase()));return(0,c.useEffect)(()=>{u()},[o,m]),(0,c.useEffect)(()=>{p(1)},[m]),(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:" space-y-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Brokers"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage all registered brokers"})]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,b.jsx)("div",{className:"flex-1 max-w-md",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,b.jsx)("input",{type:"text",placeholder:"Search by Firm Name, Contact, Region",value:k,onChange:a=>l(a.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:border-primary"})]})}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,b.jsxs)("select",{value:m,onChange:a=>n(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary",children:[(0,b.jsx)("option",{value:"all",children:"All Brokers"}),(0,b.jsx)("option",{value:"pending",children:"Pending Approval"}),(0,b.jsx)("option",{value:"approved",children:"Approved"})]})]})]}),i&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),(0,b.jsx)("div",{className:" shadow-sm rounded-lg border border-gray-300 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"COMPANY NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CONTACT"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUS"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading brokers..."})]})})}):0===x.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No brokers found"})}):x.map((a,c)=>(0,b.jsxs)("tr",{className:`${c%2==0?"bg-white":"bg-gray-50"} hover:bg-gray-100 border-b border-gray-300`,children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0"}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[a.name||"N/A"," (",c+1,")"]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.email||"N/A"})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.firmName||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.phone||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("span",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full border ${a.approvedByAdmin?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}`,children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full mr-2 ${a.approvedByAdmin?"bg-green-600":"bg-yellow-600"}`}),(console.log("游댌 Checking status for broker:",a._id,"approvedByAdmin:",a.approvedByAdmin),a.approvedByAdmin)?"Approved":"Pending"]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsx)("div",{className:"flex space-x-2",children:a.approvedByAdmin?(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 bg-green-600"}),"Approved"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>v(a._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-[#6399f0] hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Approve"}),(0,b.jsx)("button",{onClick:()=>w(a._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-red-400 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:"Reject"})]})})})]},a._id))})]})})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(o-1)*10+1,"-",Math.min(10*o,s)," of ",s," Brokers"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>p(Math.max(o-1,1)),disabled:1===o,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Array.from({length:Math.min(5,q)},(a,c)=>{let d=c+1;return(0,b.jsx)("button",{onClick:()=>p(d),className:`px-3 py-1 text-sm rounded ${o===d?"bg-primary text-white":"text-gray-500 hover:text-gray-700"}`,children:d.toString().padStart(2,"0")},d)}),(0,b.jsx)("button",{onClick:()=>p(Math.min(o+1,q)),disabled:o===q,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__dde1eb06._.js.map