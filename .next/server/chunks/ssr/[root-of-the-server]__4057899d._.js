module.exports=[40617,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].React},92287,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.AppRouterContext},3274,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.HooksClientContext},67825,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].ReactDOM},77635,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},13792,(a,b,c)=>{"use strict";b.exports=a.r(18622)},83178,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].ReactJsxRuntime},75776,(a,b,c)=>{"use strict";b.exports=a.r(13792).vendored["react-ssr"].ReactServerDOMTurbopackClient},32564,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},91952,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(83178),e=a.r(32564),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},97936,a=>{"use strict";a.s(["default",()=>g],97936);var b=a.i(83178),c=a.i(40617),d=a.i(85790);let e="https://broker-adda-be.algofolks.com/api",f={getBrokers:async(a,b,c)=>{let d=localStorage.getItem("adminToken");if(!d)throw Error("No authentication token found");let f=new URLSearchParams({page:a.toString(),limit:b.toString(),...void 0!==c&&{approvedByAdmin:c.toString()}}),g=await fetch(`${e}/brokers?${f}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}});if(!g.ok)throw Error("Failed to fetch brokers");return g.json()},approveBroker:async a=>{let b=localStorage.getItem("adminToken");if(!b)throw Error("No authentication token found");let c=await fetch(`${e}/brokers/${a}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({})});if(!c.ok)throw Error("Failed to approve broker");return c.json()},rejectBroker:async a=>{let b=localStorage.getItem("adminToken");if(!b)throw Error("No authentication token found");let c=await fetch(`${e}/brokers/${a}/reject`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({})});if(!c.ok)throw Error("Failed to reject broker");return c.json()}};function g(){let[a,e]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)("all"),[o,p]=(0,c.useState)(1),[q,r]=(0,c.useState)(1),[s,t]=(0,c.useState)(0),u=async()=>{try{h(!0),j("");let a="approved"===m||"pending"!==m&&void 0,b=await f.getBrokers(o,10,a);console.log("API Response:",b),e(b.data.brokers||[]),r(b.data.pagination.totalPages||1),t(b.data.pagination.totalBrokers||0)}catch(a){j(a instanceof Error?a.message:"Failed to fetch brokers")}finally{h(!1)}},v=async a=>{try{j(""),await f.approveBroker(a),await u()}catch(a){j(a instanceof Error?a.message:"Failed to approve broker")}},w=async a=>{try{j(""),await f.rejectBroker(a),await u()}catch(a){j(a instanceof Error?a.message:"Failed to reject broker")}},x=a.filter(a=>(a.name||"").toLowerCase().includes(k.toLowerCase())||(a.email||"").toLowerCase().includes(k.toLowerCase())||(a.phone||"").includes(k)||a.firmName.toLowerCase().includes(k.toLowerCase()));return(0,c.useEffect)(()=>{u()},[o,m]),(0,c.useEffect)(()=>{p(1)},[m]),(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Brokers"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage all registered brokers"})]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,b.jsx)("div",{className:"flex-1 max-w-md",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,b.jsx)("input",{type:"text",placeholder:"Search by Firm Name, Contact, Region",value:k,onChange:a=>l(a.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:border-primary"})]})}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,b.jsxs)("select",{value:m,onChange:a=>n(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary",children:[(0,b.jsx)("option",{value:"all",children:"All Brokers"}),(0,b.jsx)("option",{value:"pending",children:"Pending Approval"}),(0,b.jsx)("option",{value:"approved",children:"Approved"})]})]})]}),i&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),(0,b.jsx)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PHOTO"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"FIRM NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CONTACT"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"REGION"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUS"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"JOINED"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading brokers..."})]})})}):0===x.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No brokers found"})}):x.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-medium text-white",children:(a.firmName||a.name||"B").split(" ").map(a=>a[0]).join("").toUpperCase()})})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.firmName||"N/A"}),a.name&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.name})]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:a.email||"N/A"}),a.phone&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.phone})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:a.region.length>0?a.region.map(a=>a.name).join(", "):"No Region"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.approvedByAdmin?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.approvedByAdmin?"Approved":"Pending"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsx)("div",{className:"flex space-x-2",children:a.approvedByAdmin?(0,b.jsx)("span",{className:"text-green-600 text-xs font-medium",children:"Approved"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>v(a._id),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,b.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),(0,b.jsxs)("button",{onClick:()=>w(a._id),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,b.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]})})})]},a._id))})]})})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(o-1)*10+1,"-",Math.min(10*o,s)," of ",s," Brokers"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>p(Math.max(o-1,1)),disabled:1===o,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Array.from({length:Math.min(5,q)},(a,c)=>{let d=c+1;return(0,b.jsx)("button",{onClick:()=>p(d),className:`px-3 py-1 text-sm rounded ${o===d?"bg-primary text-white":"text-gray-500 hover:text-gray-700"}`,children:d.toString().padStart(2,"0")},d)}),(0,b.jsx)("button",{onClick:()=>p(Math.min(o+1,q)),disabled:o===q,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4057899d._.js.map