module.exports=[49663,a=>{"use strict";a.s(["default",()=>v],49663);var b=a.i(87924),c=a.i(72131),d=a.i(29908),e=a.i(84391),f=a.i(35112);function g(){return(g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}var h=function(a,b){void 0===b&&(b=!0),(0,c.useEffect)(function(){if(b){var c=function(b){"Escape"===b.key&&a(b)};return document.addEventListener("keyup",c),function(){b&&document.removeEventListener("keyup",c)}}},[a,b])},i=function(a,b){void 0===b&&(b=!0),(0,c.useEffect)(function(){if(b){var c=function(){a()};return window.addEventListener("resize",c),function(){b&&window.removeEventListener("resize",c)}}},[a,b])},j=function(a,b,d){void 0===d&&(d=!0),(0,c.useEffect)(function(){if(d){var c=function(c){var d=Array.isArray(a)?a:[a],e=!1;d.forEach(function(a){if(!a.current||a.current.contains(c.target)){e=!0;return}}),c.stopPropagation(),e||b(c)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),function(){d&&(document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c))}}},[a,b,d])},k=function(a,b){void 0===b&&(b=!0),(0,c.useEffect)(function(){if(b){var c=function(b){if(9===b.keyCode){var c,d=null==a||null==(c=a.current)?void 0:c.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),e=Array.prototype.slice.call(d);if(1===e.length)return void b.preventDefault();var f=e[0],g=e[e.length-1];b.shiftKey&&document.activeElement===f?(b.preventDefault(),g.focus()):document.activeElement===g&&(b.preventDefault(),f.focus())}};return document.addEventListener("keydown",c),function(){b&&document.removeEventListener("keydown",c)}}},[a,b])},l=c.useEffect,m={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},n=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],o=function(a,b,c,d,e){var f=e.offsetX,g=e.offsetY,h=8*!!d,i=c.split(" "),j=a.top+a.height/2,k=a.left+a.width/2,l=b.height,m=b.width,n=j-l/2,o=k-m/2,p="",q="0%",r="0%";switch(i[0]){case"top":n-=l/2+a.height/2+h,p="rotate(180deg)  translateX(50%)",q="100%",r="50%";break;case"bottom":n+=l/2+a.height/2+h,p="rotate(0deg) translateY(-100%) translateX(-50%)",r="50%";break;case"left":o-=m/2+a.width/2+h,p=" rotate(90deg)  translateY(50%) translateX(-25%)",r="100%",q="50%";break;case"right":o+=m/2+a.width/2+h,p="rotate(-90deg)  translateY(-150%) translateX(25%)",q="50%"}switch(i[1]){case"top":n=a.top,q=a.height/2+"px";break;case"bottom":n=a.top-l+a.height,q=l-a.height/2+"px";break;case"left":o=a.left,r=a.width/2+"px";break;case"right":o=a.left-m+a.width,r=m-a.width/2+"px"}return{top:n="top"===i[0]?n-g:n+g,left:o="left"===i[0]?o-f:o+f,transform:p,arrowLeft:r,arrowTop:q}},p=function(a){var b={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof a){var c=document.querySelector(a);null!==c&&(b=c.getBoundingClientRect())}return b},q=function(a,b,c,d,e,f){var g=e.offsetX,h=e.offsetY,i={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},j=0,k=p(f),l=Array.isArray(c)?c:[c];for((f||Array.isArray(c))&&(l=[].concat(l,n));j<l.length;){var m={top:(i=o(a,b,l[j],d,{offsetX:g,offsetY:h})).top,left:i.left,width:b.width,height:b.height};if(m.top<=k.top||m.left<=k.left||m.top+m.height>=k.top+k.height||m.left+m.width>=k.left+k.width)j++;else break}return i},r=0,s=function(){var a=document.getElementById("popup-root");return null===a&&((a=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(a)),a},t=(0,c.forwardRef)(function(a,b){var d=a.trigger,e=void 0===d?null:d,n=a.onOpen,o=void 0===n?function(){}:n,p=a.onClose,t=void 0===p?function(){}:p,u=a.defaultOpen,v=a.open,w=void 0===v?void 0:v,x=a.disabled,y=void 0!==x&&x,z=a.nested,A=void 0!==z&&z,B=a.closeOnDocumentClick,C=void 0===B||B,D=a.repositionOnResize,E=a.closeOnEscape,F=a.on,G=void 0===F?["click"]:F,H=a.contentStyle,I=void 0===H?{}:H,J=a.arrowStyle,K=void 0===J?{}:J,L=a.overlayStyle,M=a.className,N=void 0===M?"":M,O=a.position,P=void 0===O?"bottom center":O,Q=a.modal,R=void 0!==Q&&Q,S=a.lockScroll,T=void 0!==S&&S,U=a.arrow,V=void 0===U||U,W=a.offsetX,X=void 0===W?0:W,Y=a.offsetY,Z=void 0===Y?0:Y,$=a.mouseEnterDelay,_=void 0===$?100:$,aa=a.mouseLeaveDelay,ab=void 0===aa?100:aa,ac=a.keepTooltipInside,ad=void 0!==ac&&ac,ae=a.children,af=(0,c.useState)(w||void 0!==u&&u),ag=af[0],ah=af[1],ai=(0,c.useRef)(null),aj=(0,c.useRef)(null),ak=(0,c.useRef)(null),al=(0,c.useRef)(null),am=(0,c.useRef)("popup-"+ ++r),an=!!R||!e,ao=(0,c.useRef)(0);l(function(){return ag?(al.current=document.activeElement,ay(),ax(),av()):aw(),function(){clearTimeout(ao.current)}},[ag]),(0,c.useEffect)(function(){"boolean"==typeof w&&(w?ap():aq())},[w,y]);var ap=function(a){ag||y||(ah(!0),setTimeout(function(){return o(a)},0))},aq=function(a){var b;ag&&!y&&(ah(!1),an&&(null==(b=al.current)||b.focus()),setTimeout(function(){return t(a)},0))},ar=function(a){null==a||a.stopPropagation(),ag?aq(a):ap(a)},as=function(a){clearTimeout(ao.current),ao.current=setTimeout(function(){return ap(a)},_)},at=function(a){null==a||a.preventDefault(),ar()},au=function(a){clearTimeout(ao.current),ao.current=setTimeout(function(){return aq(a)},ab)},av=function(){an&&T&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},aw=function(){an&&T&&(document.getElementsByTagName("body")[0].style.overflow="auto")},ax=function(){var a,b=null==aj||null==(a=aj.current)?void 0:a.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),c=Array.prototype.slice.call(b)[0];null==c||c.focus()};(0,c.useImperativeHandle)(b,function(){return{open:function(){ap()},close:function(){aq()},toggle:function(){ar()}}});var ay=function(){if(!an&&ag&&(null==ai?void 0:ai.current)&&(null==ai?void 0:ai.current)&&(null==aj?void 0:aj.current)){var a,b,c=q(ai.current.getBoundingClientRect(),aj.current.getBoundingClientRect(),P,V,{offsetX:X,offsetY:Z},ad);aj.current.style.top=c.top+window.scrollY+"px",aj.current.style.left=c.left+window.scrollX+"px",V&&ak.current&&(ak.current.style.transform=c.transform,ak.current.style.setProperty("-ms-transform",c.transform),ak.current.style.setProperty("-webkit-transform",c.transform),ak.current.style.top=(null==(a=K.top)?void 0:a.toString())||c.arrowTop,ak.current.style.left=(null==(b=K.left)?void 0:b.toString())||c.arrowLeft)}};h(aq,void 0===E||E),k(aj,ag&&an),i(ay,void 0===D||D),j(e?[aj,ai]:[aj],aq,C&&!A);var az=function(){var a=an?m.popupContent.modal:m.popupContent.tooltip,b={className:"popup-content "+(""!==N?N.split(" ").map(function(a){return a+"-content"}).join(" "):""),style:g({},a,I,{pointerEvents:"auto"}),ref:aj,onClick:function(a){a.stopPropagation()}};return!R&&G.indexOf("hover")>=0&&(b.onMouseEnter=as,b.onMouseLeave=au),b},aA=function(){return c.default.createElement("div",Object.assign({},az(),{key:"C",role:an?"dialog":"tooltip",id:am.current}),V&&!an&&c.default.createElement("div",{ref:ak,style:m.popupArrow},c.default.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==N?N.split(" ").map(function(a){return a+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:g({position:"absolute"},K)},c.default.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ae&&"function"==typeof ae?ae(aq,ag):ae)},aB=!(G.indexOf("hover")>=0),aC=an?m.overlay.modal:m.overlay.tooltip,aD=[aB&&c.default.createElement("div",{key:"O","data-testid":"overlay","data-popup":an?"modal":"tooltip",className:"popup-overlay "+(""!==N?N.split(" ").map(function(a){return a+"-overlay"}).join(" "):""),style:g({},aC,void 0===L?{}:L,{pointerEvents:C&&A||an?"auto":"none"}),onClick:C&&A?aq:void 0,tabIndex:-1},an&&aA()),!an&&aA()];return c.default.createElement(c.default.Fragment,null,function(){for(var a={key:"T",ref:ai,"aria-describedby":am.current},b=Array.isArray(G)?G:[G],d=0,f=b.length;d<f;d++)switch(b[d]){case"click":a.onClick=ar;break;case"right-click":a.onContextMenu=at;break;case"hover":a.onMouseEnter=as,a.onMouseLeave=au;break;case"focus":a.onFocus=as,a.onBlur=au}if("function"==typeof e){var g=e(ag);return!!e&&c.default.cloneElement(g,a)}return!!e&&c.default.cloneElement(e,a)}(),ag&&f.default.createPortal(aD,s()))}),u=a.i(12398);function v(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,v]=(0,c.useState)({name:"",description:""}),[w,x]=(0,c.useState)("all"),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(1),[C]=(0,c.useState)(5),D=async()=>{try{l(!0),p("");let a=await e.regionAPI.getRegions();console.log("Regions API Response:",a),a&&a.data&&a.data.regions&&Array.isArray(a.data.regions)?f(a.data.regions):Array.isArray(a)?f(a):a.data&&Array.isArray(a.data)?f(a.data):a.regions&&Array.isArray(a.regions)?f(a.regions):(console.warn("Unexpected API response structure:",a),f([]))}catch(a){console.error("Error fetching regions:",a),p(a instanceof Error?a.message:"Failed to fetch regions"),f([])}finally{l(!1)}},E=async a=>{a.preventDefault(),console.log("Form submitted with data:",s);try{p(""),console.log("Calling regionAPI.createRegion...");let a=await e.regionAPI.createRegion(s.name,s.description);console.log("Create region API Response:",a),v({name:"",description:""}),r(!1),console.log("Refreshing regions list..."),D()}catch(a){console.error("Error creating region:",a),p(a instanceof Error?a.message:"Failed to create region")}};(0,c.useEffect)(()=>{console.log("ðŸš€ RegionsPage component mounted"),console.log("ðŸš€ Checking for admin token...");let a=localStorage.getItem("adminToken");console.log("ðŸš€ Token exists:",a?"Yes":"No"),a&&console.log("ðŸš€ Token preview:",a.substring(0,20)+"..."),D()},[]);let F=Math.ceil(a.length/C),G=()=>(0,b.jsxs)("tr",{className:"bg-white border-b border-gray-200",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-28"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-36"})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-48"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})]})})]});return(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:" space-y-6 ",children:[(0,b.jsxs)("div",{className:"mb-6 flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Region Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage regions and view brokers by region"})]}),(0,b.jsx)("button",{onClick:()=>r(!q),className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors cursor-pointer",children:q?"Cancel":"Add Region"})]}),(0,b.jsx)(t,{open:q,closeOnDocumentClick:!0,onClose:()=>r(!1),modal:!0,overlayStyle:{background:"rgba(0, 0, 0, 0.8)",zIndex:9999},contentStyle:{background:"white",borderRadius:"8px",padding:"0",border:"none",maxWidth:"500px",width:"90%",margin:"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Region"}),(0,b.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Region Name"}),(0,b.jsx)("input",{type:"text",value:s.name,onChange:a=>v({...s,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Enter region name",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:s.description,onChange:a=>v({...s,description:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Enter region description",rows:3,required:!0})]}),(0,b.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",className:"flex-1 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors cursor-pointer",children:"Create Region"}),(0,b.jsx)("button",{type:"button",onClick:()=>r(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors cursor-pointer",children:"Cancel"})]})]})]})}),o&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),(0,b.jsx)("div",{className:"shadow-sm rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"REGION NAME"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DESCRIPTION"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CREATED DATE"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-300",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G,{}),(0,b.jsx)(G,{}),(0,b.jsx)(G,{}),(0,b.jsx)(G,{}),(0,b.jsx)(G,{})]}):Array.isArray(a)&&0!==a.length?(()=>{let b=(A-1)*C;return a.slice(b,b+C)})().map((a,c)=>(0,b.jsxs)("tr",{className:"bg-white hover:bg-gray-50 border-b border-gray-200 transition-colors duration-200",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:a.description})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:(a=>{let b=new Date(a),c=b.getDate(),d=b.toLocaleString("default",{month:"short"}),e=b.getFullYear();return`${c} ${d} ${e}`})(a.createdAt)})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{console.log("Edit region:",a._id)},className:"text-primary hover:text-primary/80 transition-colors cursor-pointer",title:"Edit Region",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,b.jsx)("button",{onClick:()=>{console.log("Delete region:",a._id)},className:"text-red-500 hover:text-red-700 transition-colors cursor-pointer",title:"Delete Region",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a._id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No regions found. Create your first region above."})})})]})})}),!k&&a.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-3",children:[(0,b.jsx)("div",{className:"flex items-center text-sm text-gray-700",children:(0,b.jsxs)("span",{children:["Showing ",(A-1)*C+1," to ",Math.min(A*C,a.length)," of ",a.length," results"]})}),(0,b.jsx)(u.default,{pageCount:F,pageRangeDisplayed:3,marginPagesDisplayed:1,onPageChange:({selected:a})=>B(a+1),forcePage:A-1,previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",containerClassName:"flex items-center space-x-1",pageClassName:"px-3 py-2 text-sm font-medium rounded-md cursor-pointer text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 transition-colors",activeClassName:"bg-primary text-white border-primary",previousClassName:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors",nextClassName:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors",breakClassName:"px-3 py-2 text-sm font-medium text-gray-500",disabledClassName:"opacity-50 cursor-not-allowed"})]})]})})}}];

//# sourceMappingURL=src_app_regions_page_tsx_88bcbb7f._.js.map