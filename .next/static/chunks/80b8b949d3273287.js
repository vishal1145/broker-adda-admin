(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36557,(e,r,o)=>{r.exports=e.r(84059)},88731,e=>{"use strict";e.s(["default",()=>t]);var r=e.i(32023),o=e.i(36557);function t(e){let{children:t}=e,s=(0,o.usePathname)();return(0,r.jsx)("div",{className:"h-screen flex overflow-hidden bg-white",children:(0,r.jsxs)("div",{className:"flex flex-col w-full overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow-sm border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center px-8 space-x-8",children:[(0,r.jsx)("a",{href:"/brokers",className:"text-sm font-medium transition-colors border-b-2 ".concat("/brokers"===s?"text-primary border-primary":"text-gray-700 hover:text-primary border-transparent hover:border-primary"),children:"Brokers"}),(0,r.jsx)("a",{href:"/regions",className:"text-sm font-medium transition-colors border-b-2 ".concat("/regions"===s?"text-primary border-primary":"text-gray-700 hover:text-primary border-transparent hover:border-primary"),children:"Regions"})]}),(0,r.jsx)("div",{className:"flex-1 px-10 flex justify-end items-center",children:(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Rohit Tyagi"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Admin"})]}),(0,r.jsx)("button",{className:"ml-2 text-gray-400 hover:text-gray-500",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})})})]}),(0,r.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:(0,r.jsx)("div",{className:"py-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto   ",children:t})})})]})})}},23036,e=>{"use strict";e.s(["brokerAPI",()=>o,"regionAPI",()=>t]);let r="https://broker-adda-be.algofolks.com/api",o={getBrokers:async(e,o,t)=>{let s=localStorage.getItem("adminToken");if(!s)throw Error("No authentication token found");let a=new URLSearchParams({page:e.toString(),limit:o.toString(),...void 0!==t&&{approvedByAdmin:t.toString()}}),n=await fetch("".concat(r,"/brokers?").concat(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});if(!n.ok)throw Error("Failed to fetch brokers");return n.json()},approveBroker:async e=>{console.log("游릭 brokerAPI.approveBroker called with ID:",e);let o=localStorage.getItem("adminToken");if(console.log("游릭 Token found:",o?"Yes":"No"),!o)throw Error("No authentication token found");let t="".concat(r,"/brokers/").concat(e,"/approve");console.log("游릭 Making API call to:",t),console.log("游릭 API_BASE_URL:",r);let s=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({})});if(console.log("游릭 Response status:",s.status),console.log("游릭 Response ok:",s.ok),!s.ok)throw console.error("游댮 API Error:",await s.text()),Error("Failed to approve broker");let a=await s.json();return console.log("游릭 API Response:",a),console.log("游릭 API Response data:",a.data),console.log("游릭 Updated broker:",a.data),a},rejectBroker:async e=>{console.log("游댮 brokerAPI.rejectBroker called with ID:",e);let o=localStorage.getItem("adminToken");if(console.log("游댮 Token found:",o?"Yes":"No"),!o)throw Error("No authentication token found");let t="".concat(r,"/brokers/").concat(e,"/reject");console.log("游댮 Making API call to:",t),console.log("游댮 API_BASE_URL:",r);let s=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({})});if(console.log("游댮 Response status:",s.status),console.log("游댮 Response ok:",s.ok),!s.ok)throw console.error("游댮 API Error:",await s.text()),Error("Failed to reject broker");let a=await s.json();return console.log("游댮 API Response:",a),console.log("游댮 API Response data:",a.data),console.log("游댮 Updated broker:",a.data),a}},t={getRegions:async()=>{console.log("游릭 regionAPI.getRegions called");let e=localStorage.getItem("adminToken");if(console.log("游릭 Token found:",e?"Yes":"No"),!e)throw Error("No authentication token found");let o="".concat(r,"/regions");console.log("游릭 Making API call to:",o);let t=await fetch(o,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(console.log("游릭 Response status:",t.status),console.log("游릭 Response ok:",t.ok),!t.ok)throw console.error("游댮 API Error:",await t.text()),Error("Failed to fetch regions");let s=await t.json();return console.log("游릭 API Response:",s),s},createRegion:async(e,o)=>{console.log("游댯 regionAPI.createRegion called with:",{name:e,description:o});let t=localStorage.getItem("adminToken");if(console.log("游댯 Token found:",t?"Yes":"No"),!t)throw Error("No authentication token found");let s="".concat(r,"/regions"),a={name:e,description:o};console.log("游댯 Making API call to:",s),console.log("游댯 Request body:",a),console.log("游댯 Headers:",{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)});let n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});if(console.log("游댯 Response status:",n.status),console.log("游댯 Response ok:",n.ok),!n.ok)throw console.error("游댮 API Error:",await n.text()),Error("Failed to create region");let l=await n.json();return console.log("游댯 API Response:",l),l},getBrokersByRegion:async function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=localStorage.getItem("adminToken");if(!s)throw Error("No authentication token found");let a=new URLSearchParams({page:o.toString(),limit:t.toString(),regionId:e}),n=await fetch("".concat(r,"/brokers/region/").concat(e,"?").concat(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});if(!n.ok)throw Error("Failed to fetch brokers by region");return n.json()}}},77832,e=>{"use strict";e.s(["default",()=>a]);var r=e.i(32023),o=e.i(82701),t=e.i(88731),s=e.i(23036);function a(){let[e,a]=(0,o.useState)([]),[n,l]=(0,o.useState)(!0),[i,c]=(0,o.useState)(""),[d,x]=(0,o.useState)(""),[p,m]=(0,o.useState)("all"),[g,h]=(0,o.useState)(1),[u,f]=(0,o.useState)(1),[y,b]=(0,o.useState)(0),j=async()=>{try{l(!0),c("");let e="approved"===p||"pending"!==p&&void 0,r=await s.brokerAPI.getBrokers(g,10,e);console.log("游늵 API Response:",r),console.log("游늵 Brokers data:",r.data.brokers),a(r.data.brokers||[]),f(r.data.pagination.totalPages||1),b(r.data.pagination.totalBrokers||0)}catch(e){c(e instanceof Error?e.message:"Failed to fetch brokers")}finally{l(!1)}},k=async e=>{try{c(""),console.log("游릭 Approving broker with ID:",e);let r=await s.brokerAPI.approveBroker(e);console.log("游릭 Approve API response:",r),await j()}catch(e){console.error("游릭 Approve error:",e),c(e instanceof Error?e.message:"Failed to approve broker")}},v=async e=>{try{c(""),console.log("游댮 Rejecting broker with ID:",e);let r=await s.brokerAPI.rejectBroker(e);console.log("游댮 Reject API response:",r),a(r=>r.map(r=>r._id===e?{...r,status:"inactive",approvedByAdmin:!1}:r)),await j()}catch(e){console.error("游댮 Reject error:",e),c(e instanceof Error?e.message:"Failed to reject broker")}},w=e.filter(e=>(e.name||"").toLowerCase().includes(d.toLowerCase())||(e.email||"").toLowerCase().includes(d.toLowerCase())||(e.phone||"").includes(d)||e.firmName.toLowerCase().includes(d.toLowerCase()));return(0,o.useEffect)(()=>{j()},[g,p]),(0,o.useEffect)(()=>{h(1)},[p]),(0,r.jsx)(t.default,{children:(0,r.jsxs)("div",{className:" space-y-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Brokers"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage all registered brokers"})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,r.jsx)("div",{className:"flex-1 max-w-md",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("input",{type:"text",placeholder:"Search by Firm Name, Contact, Region",value:d,onChange:e=>x(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:border-primary"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,r.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary",children:[(0,r.jsx)("option",{value:"all",children:"All Brokers"}),(0,r.jsx)("option",{value:"pending",children:"Pending Approval"}),(0,r.jsx)("option",{value:"approved",children:"Approved"})]})]})]}),i&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),(0,r.jsx)("div",{className:" shadow-sm rounded-lg border border-gray-300 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NAME"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"COMPANY NAME"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CONTACT"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUS"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTION"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading brokers..."})]})})}):0===w.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No brokers found"})}):w.map((e,o)=>(0,r.jsxs)("tr",{className:"".concat(o%2==0?"bg-white":"bg-gray-50"," hover:bg-gray-100 border-b border-gray-300"),children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0"}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.name||"N/A"," (",o+1,")"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.email||"N/A"})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.firmName||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full border ".concat(e.approvedByAdmin?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(e.approvedByAdmin?"bg-green-600":"bg-yellow-600")}),(console.log("游댌 Checking status for broker:",e._id,"approvedByAdmin:",e.approvedByAdmin),e.approvedByAdmin)?"Approved":"Pending"]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("div",{className:"flex space-x-2",children:e.approvedByAdmin?(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 bg-green-600"}),"Approved"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>k(e._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-[#6399f0] hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Approve"}),(0,r.jsx)("button",{onClick:()=>v(e._id),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded text-white bg-red-400 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:"Reject"})]})})})]},e._id))})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(g-1)*10+1,"-",Math.min(10*g,y)," of ",y," Brokers"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>h(Math.max(g-1,1)),disabled:1===g,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Array.from({length:Math.min(5,u)},(e,o)=>{let t=o+1;return(0,r.jsx)("button",{onClick:()=>h(t),className:"px-3 py-1 text-sm rounded ".concat(g===t?"bg-primary text-white":"text-gray-500 hover:text-gray-700"),children:t.toString().padStart(2,"0")},t)}),(0,r.jsx)("button",{onClick:()=>h(Math.min(g+1,u)),disabled:g===u,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})})}}]);